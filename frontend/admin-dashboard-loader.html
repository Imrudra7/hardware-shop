<!-- /frontend/admin/admin-dashboard-loader.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Loading Admin Dashboard...</title>
</head>

<body>
    <h2>Verifying admin...</h2>
    <script>
        const API_BASE_URL = location.hostname === "localhost"
            ? "http://localhost:5000"
            : "https://hardware-shop-backend-pwf6.onrender.com";
        const token = localStorage.getItem("jwtToken");

        if (!token) {
            window.location.href = "/login";
        } else {
            fetch(`${API_BASE_URL}/api/verify-admin`, {
                method: "GET",
                headers: {
                    Authorization: "Bearer " + token,
                },
            })
                .then((res) => {
                    console(res.status);
                    if (res.status === 200) {
                        window.location.href = `/admin-dashboard?token=${token}`;
                    } else {
                        window.location.href = "/unauthorized";
                    }
                })
                .catch((error) => {
                    console.log(error);

                    window.location.href = "/login";
                });
        }
    </script>
</body>

</html>